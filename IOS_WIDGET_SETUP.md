# iOS Widget Setup Guide

Since iOS requires specific project configuration that cannot be fully automated from the CLI, please follow these steps to finish the setup on your Mac using Xcode.

## Prerequisites

The necessary source code files have already been generated:
- **Swift Code:** `ios/Runner/Widget/FreeGamesWidget.swift`
- **Entitlements:** `ios/Runner/Runner.entitlements`
- **Dart Service:** Updated `lib/services/widget_service.dart` to use the App Group.

## Step-by-Step Instructions

1.  **Open Project in Xcode:**
    - Open `ios/Runner.xcworkspace` in Xcode.

2.  **Add Widget Target:**
    - Go to **File > New > Target...**
    - Search for and select **Widget Extension**.
    - Click **Next**.
    - **Product Name:** `FreeGamesWidget`
    - **Include Configuration App Intent:** Uncheck this (if present).
    - Click **Finish**.
    - If asked to "Activate" scheme, click **Activate**.

3.  **Import the Swift File:**
    - In the Project Navigator (left sidebar), find the new `FreeGamesWidget` folder that Xcode created.
    - Delete the default `.swift` file (usually named `FreeGamesWidget.swift` or similar) inside that folder.
    - Right-click the `FreeGamesWidget` folder in Xcode and select **"Add Files to 'Runner'..."**.
    - Navigate to and select the file generated by the CLI: `ios/Runner/Widget/FreeGamesWidget.swift`.
    - **Crucial:** In the file options dialog, ensure **"Copy items if needed"** is **UNCHECKED** (since the file is already in the project structure) and ensure the target **FreeGamesWidget** is **CHECKED** in the "Add to targets" list.
    - *Alternatively:* You can drag and drop the `ios/Runner/Widget/FreeGamesWidget.swift` file from Finder into the `FreeGamesWidget` group in Xcode.
    - **Verify Target Membership:** Select `FreeGamesWidget.swift` in Xcode. In the **File Inspector** (right sidebar), ensure **Target Membership** is checked for **FreeGamesWidget** and **unchecked** for "Runner".

4.  **Enable App Groups (Data Sharing):**
    *This is required for the main app to share data with the widget.*

    - **For Runner Target:**
        - Select the project root (blue icon at the top of the left sidebar).
        - Select the **Runner** target in the main view.
        - Go to the **Signing & Capabilities** tab.
        - Click **+ Capability** (top left of the tab).
        - Search for **App Groups** and double-click to add.
        - In the App Groups section, click the **+** button.
        - Enter `group.com.ignacioaldama.egdata` and make sure it is **checked**.

    - **For FreeGamesWidget Target:**
        - Select the **FreeGamesWidget** target in the main view.
        - Go to the **Signing & Capabilities** tab.
        - Click **+ Capability**.
        - Search for **App Groups** and add it.
        - In the App Groups section, you should see `group.com.ignacioaldama.egdata`. **Check the box** next to it. (If it's not there, add it using the + button exactly as before).

5.  **Build and Run:**
    - Select the **Runner** scheme.
    - Build and run the app on a Simulator or real device.
    - Once the app opens, the widget data will be synced.
    - Go to the Home Screen, long press, tap the **+** button, and search for your app/widget to add it.
